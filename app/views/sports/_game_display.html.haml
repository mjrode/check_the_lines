

= render "game_table_header"
= render "filter_form"
- @games.order(date: :desc).each do |game|
  - next if game.home_team_abbr.nil?
  %table.table.mx-auto.small-width.top-border
    %div.max
      %thead
      %tr
        %th.h2.center-text{:scope => "col"} Away
        %th.center-text{:scope => "col"}
        %th.h2.center-text{:scope => "col"} Home
      %tbody

        %tr.top-border
          -# Name
          %td.logo.center-text
            = image_tag(game.away_team_logo, :class => [game.away_team_logo.include?('alternate') && 'alt-image'])
            <br>
            = game.away_team_abbr
          %th.center-text{:scope => "row"} Team
          %td.logo.center-text
            = image_tag(game.home_team_logo, :class => [game.home_team_logo.include?('alternate') && 'alt-image'])
            <br>
            = game.home_team_abbr

        %tr
          %th.center-text{:scope => "row"}= game.away_team_vegas_line
          %th.center-text{:scope => "row"} Line
          %th.center-text{:scope => "row"}= game.home_team_vegas_line

        %tr
          - if game.game_over
            %td.center-text= game.date
            %th.center-text Date
            %td.center-text= game.date
          - else
            %td.center-text= game.time
            %th.center-text Game Time
            %td.center-text= game.time

        %tr
          %td.center-text= game.away_team_massey_line
          %th.center-text Predicted Line
          %td.center-text= game.home_team_massey_line
        %tr
          - if game.away_team_spread_percent.to_f < 35
            %td.center-text= fa_icon 'eye-slash 2x'
          - else
            %td
          %th.center-text Contrarian
          - if game.home_team_spread_percent.to_f < 35
            %td.center-text= fa_icon 'eye-slash 2x'
          - else
            %td
        %tr
          - if game.away_rlm && game.away_rlm.to_i > 0
            %td.center-text= fa_icon 'balance-scale 2x'
          - else
            %td
          %th.center-text RLM
          - if game.home_rlm && game.home_rlm.to_i > 0
            %td.center-text= fa_icon 'balance-scale 2x'
          - else
            %td
        %tr
          - if game.away_team_spread_percent.to_f > 50
            %td.center-text.container.public-mobile
              .skills.html.round{:style => "--width: #{game.away_team_spread_percent}%;"}= "#{game.away_team_spread_percent}%"
          - else
            %td
          %th.center-text Public %
          - if game.home_team_spread_percent.to_f > 50
            %td.center-text.container.public-mobile
              .skills.html.round{:style => "--width: #{game.away_team_spread_percent}%;"}= "#{game.away_team_spread_percent}%"
          - else
            %td

        %tr
          %th.center-text{:scope => "row"}= game.away_team_final_score
          %th.center-text{:scope => "row"} Final Score
          %th.center-text{:scope => "row"}= game.home_team_final_score

        %tr.bet-border{:colspan => "3"}
          %th.center-text.pl-4.h4{:colspan => "2"} Pick:
          - if game.team_to_bet == game.away_team_name
            %td.logo.center-text
              = image_tag(game.away_team_logo, :class => [game.away_team_logo.include?('alternate') && 'alt-image'])
              <br>
              = game.away_team_abbr
          - else
            %td.logo.center-text
              = image_tag(game.home_team_logo, :class => [game.home_team_logo.include?('alternate') && 'alt-image'])
              <br>
              = game.home_team_abbr
        - if game.game_over
          %tr
            %th.center-text.pl-4.h4{:colspan => "2"} Correct Pick?
            - if game.correct_prediction
              %td.center-text.pr-4{:colspan => "1"}= fa_icon "check 2x"
            - else
              %td.h5.center-text No
        %tr
          %th.center-text.pl-4.h4{:colspan => "2"} Best Bet?
          - if game.best_bet
            %td.center-text.pr-4{:colspan => "1"}= fa_icon "lock 2x"
          - else
            %td.h5.center-text No


        %tr
          %th.center-text.pl-4.h4{:colspan => "2"} Bet Strength:
          %td.center-text= game.strength
